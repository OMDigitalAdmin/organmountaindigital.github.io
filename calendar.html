---
layout: default
title: Community Calendar
---

<main class="calendar-layout">

  <!-- A: Filter -->
  <div class="filter">
    <label for="categoryFilter"><strong>Filter by Category:</strong></label>
    <select id="categoryFilter">
      <option value="all">Show All</option>
      <option value="Family Friendly">Family Friendly</option>
      <option value="Veteran-Owned">Veteran-Owned</option>
      <option value="LGBTQ+ Friendly">LGBTQ+ Friendly</option>
      <!-- Add more later -->
    </select>
  </div>

  <!-- B: Calendar -->
  <div id="calendar"></div>

  <!-- C: Sidebar -->
  <div class="sidebar">
    <h3>Upcoming Events</h3>
    <ul id="upcomingEvents">
      <!-- JS will populate this from events.json -->
    </ul>
  </div>

  <!-- D: Call to Action -->
  <div class="cta" style="margin-top: 2rem;">
    <a href="/submit-event.html" class="donation-button">ðŸ“¬ Submit Your Event</a>
  </div>

</main>

<!-- FullCalendar -->
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet"/>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>

<script>
  let allEvents = [];

  fetch('events.json')
    .then(res => res.json())
    .then(data => {
      allEvents = data;
      initCalendar(allEvents);
      renderUpcoming(data);
    });

  function initCalendar(events) {
    const calendar = new FullCalendar.Calendar(document.getElementById('calendar'), {
      initialView: 'dayGridMonth',
      events: events,
    });
    calendar.render();

    document.getElementById('categoryFilter').addEventListener('change', function () {
      const value = this.value;
      const filtered = value === 'all' ? allEvents : allEvents.filter(e => e.category === value);
      calendar.removeAllEvents();
      calendar.addEventSource(filtered);
    });
  }

  function renderUpcoming(events) {
    const upcoming = events
      .filter(e => new Date(e.start) >= new Date())
      .slice(0, 5);
    const list = document.getElementById('upcomingEvents');
    list.innerHTML = upcoming.map(ev => `<li><strong>${ev.title}</strong><br>${new Date(ev.start).toLocaleString()}</li>`).join('');
  }
</script>
